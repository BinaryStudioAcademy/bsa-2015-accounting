#personal-view
	.alert.alert-warning(ng-show="currentUser.categories.length == 0")
		i.fa.fa-exclamation-triangle.fa-2x
		h2 &nbsp;You do not have personal budget
	#money-form(ng-show="currentUser.max_level > 1 || currentUser.admin", ng-init="showAddButton = true")
		form(editable-form='', name='moneyForm', onaftersave='personalCtrl.processMoney(showAddButton); personalCtrl.showTitle(false)', ng-show='personalCtrl.isShowTitle')
			div
				span.title Amount: 
				span(editable-number='personalCtrl.newMoney.money', e-name='amount', e-form='moneyForm', onbeforesave="personalCtrl.checkField($data)", onaftersave='personalCtrl.editNewMoneyObject($data, "money")', e-required='') {{ personalCtrl.newMoney.money }}
			div
				span.title Currency: 
				span(editable-select='personalCtrl.newMoney.currency', e-name='currency', e-form='moneyForm', e-ng-options='currency for currency in personalCtrl.currency', onbeforesave="personalCtrl.checkField($data)", onaftersave='personalCtrl.editNewMoneyObject($data, "currency")', e-required='')
					| {{ personalCtrl.newMoney.currency }}
			div
				span.title Category: 
				span(editable-select='personalCtrl.newMoney.category', e-name='category', e-form='moneyForm', onshow='loadGroups()', e-ng-options='category.id as category.name for category in personalCtrl.categories', onbeforesave="personalCtrl.checkField($data)", onaftersave='personalCtrl.editNewMoneyObject($data, "category")', e-required='')
					| {{ personalCtrl.newMoney.category }}
			#button-group
				span(ng-show='moneyForm.$visible')
					button.action-button.btn.btn-primary(type='submit', ng-disabled='moneyForm.$waiting', ng-show="showAddButton")
						| Add
					button.action-button.btn.btn-danger(type='submit', ng-disabled='moneyForm.$waiting', ng-show="!showAddButton")
						| Take
					button#cancel-button.btn.btn-default(type='button', ng-disabled='moneyForm.$waiting', ng-click='moneyForm.$cancel(); personalCtrl.showTitle(false)')
						| Cancel
		button#add-button.btn.btn-primary(type='button', ng-click='moneyForm.$show(); personalCtrl.showTitle(true); showAddButton = true', ng-show='!moneyForm.$visible')
			| Add money&nbsp;
			i.fa.fa-plus
		button.btn.btn-danger(type='button', ng-click='moneyForm.$show(); personalCtrl.showTitle(true); showAddButton = false', ng-show='!moneyForm.$visible')
			| Take money&nbsp;
			i.fa.fa-minus
	button.btn.btn-warning(ng-click="personalCtrl.isCollapsedMoneyTable = !personalCtrl.isCollapsedMoneyTable; personalCtrl.changeMoneyText()") {{personalCtrl.moneyButtonText}} income money&nbsp;
		i.fa.fa-money
	#main(ng-hide="personalCtrl.budgets.length == 0")
		table#income-money-table.table-hover.fixed(collapse="personalCtrl.isCollapsedMoneyTable")
			colgroup
				col
				col
				col
				col
			thead
				tr
					th#income-money-header(colspan="4")
						| Income money
				tr
					th.header-text
						| Date
					th.header-text
						| Category  
					th.header-text
						| Amount
					th.header-text
						| Added by
			tbody
		table#income-table.table-hover.fixed
			colgroup
				col.col-category
				col.col-budget
				col.col-left
			thead
				tr
					th#income-header(colspan="3")
						| Personal budgets
				tr
					th.header-text
						| Category
					th.header-text
						| Left  
						#currency-group.btn-group(ng-click="personalCtrl.changeCurrency('left')")
							label.btn.btn-primary(ng-model="personalCtrl.currencyLeftModel", btn-radio="'UAH'") UAH
							label.btn.btn-primary(ng-model="personalCtrl.currencyLeftModel", btn-radio="'USD'") USD
					th.header-text
						| Spent  
						#currency-group.btn-group(ng-click="personalCtrl.changeCurrency('spent')")
							label.btn.btn-primary(ng-model="personalCtrl.currencySpentModel", btn-radio="'UAH'") UAH
							label.btn.btn-primary(ng-model="personalCtrl.currencySpentModel", btn-radio="'USD'") USD
			tbody
				tr(ng-repeat="budget in personalCtrl.budgets")
					td {{budget.categoryId}}
					td 
						span#budget-left {{budget.left | currency:""}}
					td 
						span#budget-spent {{budget.spent | currency:""}}
		table.table-hover.fixed
			colgroup
				col.table-toggle
				col.table-date-header
				col.table-category
				col.table-expense
				col.table-cost
				col.table-carrency
				col.table-sub
				col.table-addBy
				col.table-description-header
			thead
				tr
					th#outcome-header(colspan="9")
						| Personal expenses
				tr
					th
						button.fa.fa-list(ng-click='personalCtrl.toggleAllExpenses()' ng-show='personalCtrl.check')
						button.fa.fa-th(ng-click='personalCtrl.toggleAllExpenses()' ng-hide='personalCtrl.check')
					th
						| Time
					th
						| Category
					th
						| Subcategory
					th
						| Name
					th
						span(ng-click="sortType = 'currencySort'; sortReverse = !sortReverse; personalCtrl.sort(sortType, sortReverse)") Amount &nbsp;
							span.fa.fa-caret-down(ng-show="sortType == 'currencySort' && !sortReverse")
							span.fa.fa-caret-up(ng-show="sortType == 'currencySort' && sortReverse")
							span.fa.fa-sort(ng-hide="sortType == 'currencySort'")
					th
						span(ng-click="sortType = 'currency'; sortReverse = !sortReverse; personalCtrl.sort(sortType, sortReverse)") $ / &#8372; &nbsp;
							span.fa.fa-caret-down(ng-show="sortType == 'currency' && !sortReverse")
							span.fa.fa-caret-up(ng-show="sortType == 'currency' && sortReverse")
							span.fa.fa-sort(ng-hide="sortType == 'currency'")
					th
						| Added by
					th
						i.fa.fa-cog
		#table-container
			table.table-hover.fixed
					colgroup
						col.table-date
						col.table-category
						col.table-expense
						col.table-cost
						col.table-carrency
						col.table-sub
						col.table-addBy
						col.table-description
					tbody(ng-repeat="date in personalCtrl.dates | limitTo: personalCtrl.expensesLimit", ng-hide="!(filteredData = (personalCtrl.getExpensesByDate(date) " +
					"| filter: {name: nameModelFilter, category: {name: categoryModelFilter.name}, " +
					"subcategory: {name: subcategoryModelFilter.name}, creator: {name: authorModelFilter}} " +
					"| dateRange:startDateFilter:endDateFilter)).length")
						tr.date-hilight
							td
								i.fa.fa-chevron-right(ng-click="personalCtrl.toggleCustom($index)" ng-hide="!personalCtrl.hiddenList[$index]" )
								i.fa.fa-chevron-down(ng-click="personalCtrl.toggleCustom($index)" ng-show="!personalCtrl.hiddenList[$index]")
							td(colspan='7')

								| {{ date | date: 'fullDate' }}
						tr(ng-repeat="expense in filteredData", ng-init='personalCtrl.pageTitleEquals(filteredData)', ng-hide="personalCtrl.hiddenList[$parent.$index]" )
							td
								| {{ expense.time | date:'HH:mm' }}
							td
								span(editable-select='expense.category.id', e-name='category.name', onshow="personalCtrl.getSubcategories($data)", e-form='rowform', onaftersave='personalCtrl.editExpenseObject($data, "categoryId")', e-ng-options='category.id as category.name for category in personalCtrl.categories' e-ng-change="personalCtrl.getSubcategories($data)", e-required="")
									| {{ personalCtrl.getField(expense.category.id, "category") || 'empty' }}
							td
								span(editable-select='expense.subcategory.id', e-name='subcategory.name', e-form='rowform', onaftersave='personalCtrl.editExpenseObject($data, "subcategoryId")', onbeforesave="personalCtrl.checkField($data)", e-ng-options='subcategory.id as subcategory.name for subcategory in personalCtrl.subcategories', e-required="")
									| {{ personalCtrl.getField(expense.subcategory.id, "subcategory") || expense.subcategory.name }}
							td
								span(editable-text='expense.name', e-name='name', e-form='rowform', onaftersave='personalCtrl.editExpenseObject($data, "name")', onbeforesave="personalCtrl.checkField($data)", e-required="")
									| {{ expense.name  || 'empty' }}
							td
								span(editable-number='expense.price', e-name='price', e-form='rowform', onaftersave='personalCtrl.editExpenseObject($data, "price")', onbeforesave="personalCtrl.checkField($data)", e-required="")
									| {{ expense.price  || 'empty' }}
							td
								span(editable-select='expense.currency', e-name='currency', e-form='rowform', e-ng-options='currency for currency in personalCtrl.currency', onaftersave='personalCtrl.editExpenseObject($data, "currency")' e-required="")
									| {{ expense.currency }}
							td
								span(e-name='creator', e-form='rowform') {{ expense.creator.name }}
							td
								form.form-buttons.form-inline(editable-form='', name='rowform', ng-show='rowform.$visible', onaftersave="personalCtrl.editExpense(expense.id)", shown='inserted == expense')

									button.btn-xs.btn.btn-success.fa.fa-check(type='submit', ng-disabled='rowform.$waiting')
									button#delete-button.btn-xs.btn.btn-warning.fa.fa-ban(type='button', ng-disabled='rowform.$waiting', ng-click='rowform.$cancel()')
								.buttons(ng-show='!rowform.$visible')
									button.btn-xs.btn.btn-primary.edit-button.fa.fa-pencil(ng-click='rowform.$show()')
									button.btn-xs.btn.btn-danger.fa.fa-trash-o(ng-click="personalCtrl.deleteExpense(expense.id, expense.name)")
								.btn-group(dropdown='')
									button.btn.fa.fa-info(ng-show='!rowform.$visible' type='button', dropdown-toggle='')
									span.dropdown-menu.dropdown-menu-right(editable-text='expense.description', e-name='description' onbeforesave="personalCtrl.checkField($data)" e-form='rowform' role='menu', aria-labelledby='split-button' onaftersave='personalCtrl.editExpenseObject($data, "description")') {{ expense.description }}
					tbody(ng-show="personalCtrl.isLoadMore()")
						tr
							td
							td(colspan='7')
								a(ng-click="personalCtrl.loadExpenses(); personalCtrl.pushList(true)")
									| load more expenses&nbsp;
									i.fa.fa-plus
