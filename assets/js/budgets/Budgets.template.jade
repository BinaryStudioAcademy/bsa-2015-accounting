#budgets-view
	form.editCanges
		button.btn.btn-primary(type='submit') save changes
		button.btn.btn-danger(type='button') discard changes

	table.table.table-bordered.table-hover.table-condensed
		thead
			tr
				th(colspan='2') Category
				th Budget
				th Used
			tr
				td(colspan='2')
					select#years(ng-model='budCtrl.year', ng-change="budCtrl.updateYear()")
						option(ng-repeat='year in budCtrl.years', value='{{year}}') {{year}}
				td {{budCtrl.annualBudget | currency}}
				td {{budCtrl.annualUsed | currency}}

		tbody(ng-repeat='category in budCtrl.categories')
			tr
				th(ng-click="budCtrl.toggleCustom($index)" class="review" )
					i.fa.fa-caret-right(ng-show="!budCtrl.hiddenList[$index]")
					i.fa.fa-caret-down(ng-hide="!budCtrl.hiddenList[$index]")
				th
					span(editable-text='category.name' name='name') {{ category.name || 'empty' }}
				th 
					span(editable-text='category.budget' name='budget') {{category.budget || 'empty' | currency}}
				th {{category.used | currency}}

				//- td(style='white-space: nowrap')
				//- 	form.form-buttons.form-inline(editable-form='', name='headform', onbeforesave='saveUser($data, subcategory.id)', 
				//- 		ng-show='headform.$visible', 	shown='inserted == subcategory')
				//- 		button.btn.btn-primary(type='submit', ng-disabled='headform.$waiting')
				//- 			| save
				//- 		button.btn.btn-default(type='button', ng-disabled='headform.$waiting', ng-click='headform.$cancel()')
				//- 			| cancel
				//- 	.buttons(ng-show='!headform.$visible')
				//- 		button.btn.btn-primary(ng-click='headform.$show()') edit
				//- 		button.btn.btn-danger(ng-click='removeUser($index)') del



			tr.hide-list(ng-repeat='subcategory in category.subcategories' ng-hide="!budCtrl.hiddenList[$parent.$index]")
				td
					form.form-buttons.form-inline(editable-form='', name='rowform', ng-show='rowform.$visible',	shown='inserted == subcategory')
						button.btn.btn-primary(type='submit', ng-disabled='rowform.$waiting')
							| save
						button.btn.btn-default(type='button', ng-disabled='rowform.$waiting', ng-click='rowform.$cancel()')
							| cancel
					.buttons(ng-show='!rowform.$visible')
						button.btn.btn-primary(ng-click='rowform.$show()') edit
						button.btn.btn-danger(ng-click='removeUser($index)') del
				td
					span(editable-text='subcategory.name', e-name='subcategory.name', e-form='rowform', e-required='')
						|{{subcategory.name || 'empty' }}
				td
					span(editable-text='subcategory.budget', e-name='subcategory.udget', e-form='rowform')
						| {{ subcategory.budget || 'empty' | currency }}
				td {{subcategory.used | currency}}
				
			tr(ng-hide="!budCtrl.hiddenList[$index]")
				th(colspan='4',ng-click='budCtrl.addCategory()')
					a add new sub cat
		tbody
			tr
				th(colspan='4',ng-click='budCtrl.addCategory()')
					a add new cat

